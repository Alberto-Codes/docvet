# Retrospective: Epic 19 — Advanced Exclude Patterns

**Date:** 2026-02-27
**Facilitator:** Bob (Scrum Master)
**Epic:** Epic 19 — Advanced Exclude Patterns
**Status:** Complete (2/2 stories done)

## Team Participants

- Bob (Scrum Master) — Facilitator
- Alice (Product Owner)
- Charlie (Senior Dev / Architect)
- Dana (QA Engineer)
- Elena (Junior Dev)
- Alberto-Codes (Project Lead)

## Epic Summary & Metrics

**Delivery:**

- Stories completed: 2/2 (100%)
- Files modified: 4 (`src/docvet/discovery.py`, `tests/unit/test_discovery.py`, `tests/integration/test_discovery.py`, `docs/site/configuration.md`)
- Tests added: 33 new (23 unit + 10 integration)
- Test suite: 795 tests passing (all gates green)
- Zero source code deps added — stdlib only (`fnmatch` + `pathlib`)

**Quality:**

- Debug sessions required: 0 (continues consecutive zero-debug streak)
- Blockers encountered: 0
- Technical debt incurred: 0 new items
- Regressions: 0
- Code review (19.1): Changes Requested → Fixed → Approved (1 HIGH, 2 MEDIUM, 2 LOW)
- Code review (19.2): Completed but not recorded in story file

**Agent Models Used:**

- Story 19.1: Claude Opus 4.6
- Story 19.2: Claude Opus 4.6

## Successes & Strengths

1. **Clean technical pivot.** The epics doc specified `PurePath.full_match()` for `**` glob support, but this API is Python 3.13+, not 3.12. The dev caught it immediately via empirical verification (`hasattr` check on 3.12.12), pivoted to `fnmatch` with zero-segment fallbacks. No time lost, no debug sessions.
2. **Zero-debug streak continues.** Both stories implemented cleanly on first pass. Research-before-coding and thorough dev notes continue to compound.
3. **"What NOT to Change" practice applied.** Story 19.1 included an explicit 5-item list of what not to modify — carrying forward the team agreement from Epic 18's retro. Prevented scope creep effectively.
4. **Thorough test coverage.** 33 new tests across unit and integration, covering all 4 pattern types, all 3 discovery modes (ALL, DIFF, STAGED), boundary cases, and backward compatibility regression.
5. **Code review caught real issues.** Story 19.1 review identified CC=27 exceeding SonarQube threshold. Refactored to extracted helpers (`_matches_trailing_slash`, `_matches_double_star`) with compound `or` dispatch — cleaner design emerged from the review process.

## Challenges & Growth Areas

1. **Inaccurate planning assumption propagated across documents.** The `PurePath.full_match()` assumption appeared in `epics-next.md` and was repeated in Epic 18's retro "Next Epic Preview" section. Dev notes caught it, but the incorrect info lived in two artifacts.
2. **Cognitive complexity exceeded threshold in initial implementation.** Story 19.1 hit CC=27 before review-driven refactoring. Recurring theme since Epic 12 — the helper extraction playbook works but remains reactive.
3. **Story 19.2 artifacts not fully updated.** Code review was completed but not recorded in the story file. Story header still says "review" while sprint-status says "done". Minor documentation gap, not a process gap.

## Key Insights & Learnings

1. **Planning docs propose, dev notes verify.** Technical assumptions in planning documents should be treated as hypotheses, not facts. Empirical verification during implementation is essential — especially for stdlib API availability across Python versions.
2. **"What NOT to Change" sections prevent scope creep.** Second consecutive epic validating this practice. Explicitly listing what should NOT be modified is as valuable as listing what should.
3. **The zero-debug streak is a system outcome.** Research-before-coding, thorough dev notes, clear story scoping, and "What NOT to Change" guardrails compound into predictable, friction-free execution.

## Previous Retro Follow-Through

**Epic 18 Action Items:** None (clean epic, no action items set)

**Epic 18 Team Agreement:**
- Continue "What NOT to Change" pattern in Dev Notes: **Applied** in Story 19.1 (5-item explicit list)

**Trend: 4/4 → 2/4 → 1/4 → 3/3 → 3/3 → 3/3 → 3/3 → 4/6 → 7/8 → 2/2 → 0/2 → 0/1 → 2/4 → 2/2 → N/A → N/A → N/A**

**Analysis:** Third consecutive N/A — small, clean epics (17, 18, 19) that generate minimal action items. The trend is meaningful only across meatier epics.

## Technical Debt

No new technical debt incurred in Epic 19. No carried items remaining.

## Action Items

1. **Verify technical assumptions in planning docs before starting implementation.** Add verification status for stdlib/API assumptions to story creation checklist. Owner: Bob (SM).
2. **Backfill Story 19.2 code review section.** Record the review that was completed but not documented. Owner: Dev team.

## Team Agreements

1. **Continue "What NOT to Change" pattern in Dev Notes.** Third consecutive epic validating this practice — now a standard.
2. **Planning docs are proposals, not verified specs.** Always validate technical assumptions empirically during implementation.

## Next Epic Preview

**Epic 20: CLI Progress & Timing** (2 stories)

- Story 20.1: Progress bar for file processing
- Story 20.2: Per-check timing and total execution time
- Dependencies on Epic 19: None
- Preparation needed: None

*Note: This retro was run retroactively. Epics 20, 21, and 22 are already complete at time of review. No preparation discussion needed — subsequent epics shipped without issues.*

## Readiness Assessment

- Testing & Quality: All gates green, 795 tests passing, zero regressions
- Deployment: Advanced exclude patterns available in production
- Stakeholder Acceptance: Confirmed by Alberto-Codes
- Technical Health: Solid — clean 4-branch dispatch pattern, well-tested
- Unresolved Blockers: None

**Verdict:** Epic 19 fully complete. Advanced exclude patterns (trailing-slash and double-star) working correctly. No dependencies or blockers surfaced in subsequent epics (20-22).

---

*Retrospective facilitated by Bob (Scrum Master) on 2026-02-27*
