"""Integration test fixtures â€” temp git repos for freshness checks."""

from __future__ import annotations

import subprocess

import pytest


@pytest.fixture
def git_repo(tmp_path):
    """Create a temporary git repository for integration tests."""
    subprocess.run(["git", "init"], cwd=tmp_path, check=True, capture_output=True)
    subprocess.run(
        ["git", "config", "user.email", "test@test.com"],
        cwd=tmp_path,
        check=True,
        capture_output=True,
    )
    subprocess.run(
        ["git", "config", "user.name", "Test"],
        cwd=tmp_path,
        check=True,
        capture_output=True,
    )
    return tmp_path
